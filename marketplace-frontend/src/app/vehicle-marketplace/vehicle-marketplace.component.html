<div class="vehicle-marketplace-container">
  <!-- Header mit Kategorien -->
  <div class="header">
    <h1>Fahrzeuge kaufen & verkaufen</h1>
    <div class="categories">
      <button *ngFor="let category of categories" (click)="onCategoryChange(category.id)">
        {{ category.name }}
      </button>
    </div>
  </div>

  <!-- Filterbereich -->
  <div class="filters">
    <h2>Filter</h2>
    <form (ngSubmit)="onFilterChange()">
      <div class="filter-group">
        <select id="mark" [(ngModel)]="filters.mark" name="mark" (change)="onMarkChange($event)">
          <option *ngFor="let mark of marks" [value]="mark.id">{{ mark.name }}</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="model">Modell:</label>
        <select id="model" [(ngModel)]="filters.model" name="model">
          <option *ngFor="let model of models" [value]="model.id">{{ model.name }}</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="type">Typ:</label>
        <select id="type" [(ngModel)]="filters.type" name="type">
          <option *ngFor="let type of vehicleTypes" [value]="type.id">{{ type.name }}</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="priceMin">Preis (von):</label>
        <input type="number" id="priceMin" [(ngModel)]="filters.priceMin" name="priceMin" />
        <label for="priceMax">bis:</label>
        <input type="number" id="priceMax" [(ngModel)]="filters.priceMax" name="priceMax" />
      </div>
      <div class="filter-group">
        <label for="condition">Zustand:</label>
        <select id="condition" [(ngModel)]="filters.condition" name="condition">
          <option value="new">Neu</option>
          <option value="used">Gebraucht</option>
          <option value="broken">Defekt</option>
        </select>
      </div>
      <button type="submit">Suchen</button>
    </form>
  </div>

  <!-- Fahrzeugliste -->
  <div class="vehicle-list">
    <div *ngFor="let vehicle of vehicles" class="vehicle-item">
      <img [src]="vehicle.pictures[0] || '/assets/placeholder.png'" alt="{{ vehicle.name }}" />
      <div class="vehicle-info">
        <h3>{{ vehicle.name }}</h3>
        <p>{{ vehicle.description }}</p>
        <p>Preis: {{ vehicle.price }} â‚¬</p>
        <p>Laufleistung: {{ vehicle.mileage }} km</p>
        <button (click)="viewDetails(vehicle.id)">Details ansehen</button>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    <button
      *ngFor="let page of [].constructor(Math.ceil(totalVehicles / vehiclesPerPage))"
      (click)="onPageChange(page + 1)"
      [class.active]="page + 1 === currentPage"
    >
      {{ page + 1 }}
    </button>
  </div>
</div>
